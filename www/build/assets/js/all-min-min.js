!function(){var e=angular.module("ionic-app",["ionic"]);e.config(["$httpProvider",function(e){e.interceptors.push("APIInterceptor")}]),e.run(["$ionicPlatform",function(e){e.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault()})}])}(),function(){angular.module("ionic-app").service("APIInterceptor",[function(){var e=0,t=this;return t.request=function(t){return e++,document.getElementById("layout").style.display="none",document.getElementById("loading").style.display="block",t},t.response=function(t){return e--,0==e&&(document.getElementById("layout").style.display="block",document.getElementById("loading").style.display="none"),t},t.responseError=function(e){return 401===e.status&&console.log("interceptor response error"),e},t}])}(),function(){angular.module("ionic-app").factory("WeatherService",["$http","$q",function(e,t){var n="e11af50148682cadb8b81ee1e1f1df4d",o="http://api.openweathermap.org/data/2.5/weather?units=metric&APPID="+n,r="http://openweathermap.org/img/w/",i={};return i.getIconUrl=function(e){return r+e+".png"},i.mapData=function(e){var t={};return t.temperature=e.main,t.icon=i.getIconUrl(e.weather[0].icon),t.description=e.weather[0].description,t.city=e.name,t},i.getWeatherByCity=function(n){var r=t.defer();return e({method:"GET",url:o+"&q="+n}).then(function(e){r.resolve(i.mapData(e.data))},function(e){r.reject(e)}),r.promise},i.getWeatherByGeoLocation=function(){var n=t.defer();return navigator.geolocation.getCurrentPosition(function(t){if(t){console.log(t);var r=t.coords.latitude,a=t.coords.longitude;e({method:"GET",url:o+"&lat="+r+"&lon="+a}).then(function(e){n.resolve(i.mapData(e.data))},function(e){n.reject(e)})}else n.resolve("location is not found!")}),n.promise},i}])}(),function(){angular.module("ionic-app").controller("HomeController",["$scope","WeatherService",function(e,t){function n(){e.Processing=!0,t.getWeatherByGeoLocation().then(function(t){t.name&&(e.City=t.name),e.WeatherList.push(t),e.Processing=!1})}e.WeatherList=[],e.NewCityForm=!1,e.NewCity="",e.Processing=!1,n(),e.addCity=function(){e.NewCityForm=!0},e.findCity=function(){e.Processing=!0,t.getWeatherByCity(e.NewCity).then(function(t){t.name&&(e.City=t.name),e.WeatherList.push(t),e.NewCity="",e.NewCityForm=!1,e.Processing=!1})}}])}();